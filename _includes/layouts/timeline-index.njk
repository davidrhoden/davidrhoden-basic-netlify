---
layout: layouts/base.njk
section: timeline
---

<!-- post loop -->
{% set showYear = true %}
{% set currentYear = "" %}
{% for post in posts %}
{% if showYear %}
      {% set postYear = post.date.getFullYear() %}
      {% if currentYear != postYear %}
      {% set currentYear = postYear %}
      <h3>{{ postYear }}</h3>
      {% endif %}
{% endif %}
<article class="flex">
  <div class="left">
    {% if post.data.image %}<img class="thumbnail" src="{{ post.data.image }}?nf_resize=fit&w=320">{% endif %}
  </div>
  <div>
  <h3>
    <a href="{{ post.url | url }}">
      {% if post.data.title %}
        {{ post.data.title }}
      {% else %}
        Untitled
      {% endif %}
    </a>
  </h3>
  {% if post.data.summary %}
    <p>
      {{ post.data.summary }}
    </p>
  {% endif %}
  <p>
    <time datetime="{{ post.date | machineDate }}">
      <small>{{ post.date | readableDate }} by {{ metadata.author.name }}</small>
    </time>
  </p>
    {% if post.data.tags %}
      <p>
        {% for tag in post.data.tags %}
          {%- if tag != "post" -%}
            {% set tagUrl %}/tags/{{ tag | slug }}/{% endset %}
          <a href="{{ tagUrl | url }}" rel="tag">{{ tag }}</a>
          {%- endif -%}
        {% endfor %}
      </p>
    {% endif %}
</div>
</article>
{% endfor %}

{# {% set showYear = true %} #}
{% set currentYear = "" %}
{% for post in collections.post | reverse %}
{% if showYear %}
    {% set postYear = post.date.getFullYear() %}
    {% if currentYear != postYear %}
        {% set currentYear = postYear %}
        </div>
        <div class="flex align-items-center">
        <h3>{{ postYear }}</h3>
    {% endif %}
{% endif %}
  <div>
      {% if post.data.image %}
          <a class="tiny-thumbnail" href="{{ post.url }}"><img  src="{{ post.data.image }}?nf_resize=smartcrop&h=32&w=32"></a>
      {% else %}
          <a class="tiny-thumbnail" href="{{ post.url }}" style="display: block; height: 32px; width: 32px; background: #ff0099; border: 1px solid white;"></a>
      {% endif %}
      <div class="hidden">
          {% if post.data.title %}
            {{ post.data.title }}
          {% else %}
            Untitled
          {% endif %}
          <p>
            <time datetime="{{ post.date | machineDate }}">
              <small>{{ post.date | readableDate }} by {{ metadata.author.name }}</small>
            </time>
          </p>
          {% if post.data.tags %}
            <p>
              {% for tag in post.data.tags %}
                {%- if tag != "post" -%}
                  {% set tagUrl %}/tags/{{ tag | slug }}/{% endset %}
                <a href="{{ tagUrl | url }}" rel="tag">{{ tag }}</a>
                {%- endif -%}
              {% endfor %}
            </p>
          {% endif %}
      </div>
  </div>
{% endfor %}


<!-- Pagination links -->
<div class="page-selector clear">
  {% if pagination.previousPageHref %}
    <a href="{{ pagination.previousPageHref }}" class="page-numbers">Back to the future.</a>
  {% else %}
    <span class="page-numbers">You've reached the present.</span>
  {% endif %}
  <span>
    Page {{ pagination.pageNumber + 1 }} of {{ pagination.links | length  }}.
  </span>
  {% if pagination.nextPageHref %}
    <a href="{{ pagination.nextPageHref }}" class="page-numbers">Forward to the past.</a>
  {% else %}
    <span class="page-numbers">You've reached the beginning.</span>
  {% endif %}
  <ul class="pagination">
  {%- for pageEntry in pagination.pages %}
    <li><a href="{{ pagination.hrefs[ loop.index0 ] }}"{% if page.url == pagination.hrefs[ loop.index0 ] %} aria-current="page"{% endif %}>{{ loop.index }}</a></li>
  {%- endfor %}
  </ul>
</div>