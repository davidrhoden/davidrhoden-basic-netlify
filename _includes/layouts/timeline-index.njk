---
layout: layouts/base.njk
pageType: timeline
section: timeline
---

<!-- post loop -->
{% set showYear = true %}
{% set currentYear = "" %}
{% for post in posts %}
{% if showYear %}
      {% set postYear = post.date.getFullYear() %}
      {% if currentYear != postYear %}
      {% set currentYear = postYear %}
      <h3>{{ postYear }}</h3>
      {% endif %}
{% endif %}
<article class="flex">
  <div class="left">
    {% if post.data.image %}
      <img class="thumbnail" src="/static/img/timeline/thumbnails/160/{{ post.data.image }}" />{% endif %}
  </div>
  <div>
  <p>
    <small><time datetime="{{ post.date | machineDate }}"><span class="todays-date">{{ post.date | readableDate }}</time></small>
  </p>
  <h3>
    <a href="{{ post.url | url }}">
      {% if post.data.title %}
        {{ post.data.title }}
      {% else %}
        Untitled
      {% endif %}
    </a>
  </h3>
  {% if post.data.summary %}
    <p>
      {{ post.data.summary }}
    </p>
  {% endif %}
    {% if post.data.tags %}
      <p>
        {% for tag in post.data.tags %}
          {%- if tag != "post" -%}
            {% set tagUrl %}/tags/{{ tag | slug }}/{% endset %}
          <a href="{{ tagUrl | url }}" rel="tag">{{ tag }}</a>
          {%- endif -%}
        {% endfor %}
      </p>
    {% endif %}
</div>
</article>
{% endfor %}
</div>
<div class="container-wide">
  <div id="timeline-detail"></div>
  <div class="photo-timeline flex">
    {% set currentYear = "" %}
    {% for post in collections.post | reverse %}
    {% if showYear %}
      {% set postYear = post.date.getFullYear() %}
      {% if currentYear != postYear %}
          {% set currentYear = postYear %}
          <span class="post-year">{{ postYear }}</span>
      {% endif %}
    {% endif %}
    <div class="photo-timeline-link">
        {% if post.data.image %}
            <a class="tiny-thumbnail" href="{{ post.url }}"><img src="/static/img/timeline/thumbnails/32/{{ post.data.image }}"></a>
        {% else %}
            <a class="tiny-thumbnail" href="{{ post.url }}"></a>
        {% endif %}
        <div class="hidden">
          <time datetime="{{ post.date | machineDate }}">
            <small>{{ post.date | readableDate }}</small>
          </time>
            {% if post.data.title %}
              {{ post.data.title }}
            {% else %}
              Untitled
            {% endif %}

            {% if post.data.tags %}
                {% for tag in post.data.tags %}
                  {%- if tag != "post" -%}
                    {% set tagUrl %}/tags/{{ tag | slug }}/{% endset %}
                  <a href="{{ tagUrl | url }}" rel="tag">{{ tag }}</a>
                  {%- endif -%}
                {% endfor %}
            {% endif %}
        </div>
    </div>
  {% endfor %}
  </div>
  <!-- Pagination links -->
  <div class="page-selector">
    {% if pagination.previousPageHref %}
      <a href="{{ pagination.previousPageHref }}" class="page-numbers">Back to the future.</a>
    {% else %}
      <span class="page-numbers">You've reached the present.</span>
    {% endif %}
    <span>
      Page {{ pagination.pageNumber + 1 }} of {{ pagination.links | length  }}.
    </span>
    {% if pagination.nextPageHref %}
      <a href="{{ pagination.nextPageHref }}" class="page-numbers">Forward to the past.</a>
    {% else %}
      <span class="page-numbers">You've reached the beginning.</span>
    {% endif %}
  </div>
</div>
